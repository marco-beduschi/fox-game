{"version":3,"sources":["ui.ts","constants.ts","gameState.ts","buttons.ts","init.js"],"names":["init","console","log","handleUserAction","nextTimeToTick","Date","now","nextAnimationFrame","game","tick","TICK_RATE","requestAnimationFrame"],"mappings":";;AIAA;;AACA;;ADDA,AFAa,AGEb,IDFA,GFAa,CAAA,OEAb,EFAa,CEAb,EFAiC,IAApB,CEAb,CAAA,aAAA,CAAA;AFCa,ACDb,AFAA,IEAA,GDCa,CAAA,ACDb,CFAgB,EEAhB,EDCa,EDDb,CCCqB,ADDE,CCCD,CCDtB,CAAA,EFAA,ECCqB,ADDe,ECCN,ACD9B,CAAA,KDCqB,EAAiB,SAAjB,CAAR;AECb,AFAa,ADDX,EAAA,EGCI,GFAO,CAAA,EDDH,CAAC,QCCE,GEAW,AFAW,EDDjC,CGCyB,AFAd,ADDY,MAAvB,EAA+B,EGCL,OHD1B,EGCyB,CHDkB,CGCE,IAApB,EAAiC,MHDJ,KAAtD;AGEA,AFAW,ACFb,AFCC,EGCC,EDFF,GDEa,CAAA,EEAH,CACL,GFDQ,CCFb,EDEsB,CAAC,ACFvB,KDEsB,CEApB,CACiB,AFDW,ACF9B,CAAA,KCGuB,AFDD,CAAT,OCFb,CAAA,ECGuB,CAAA,KAAA,CAAM,SAAN,CAAJ,GAAoB,OADrC,EAEG,SAFH,CAEa,MAFb,CAEoB,aAFpB,EAEmC,IAFnC;AAGD,AFFY,CEFb,MFEa,CAAA,UAAA,GAAqB,EAArB;AACA,ACOb,AFZA,IEYM,GDPO,ADLb,CCKa,ADLb,KEYe,CFZf,EEYkB,CFZlB,GCKa,GAAuB,ADLpC,CCKa;AEGb,ADKE,EAAA,OCLsB,ADKf,EAAE,MADO,GCJlB,CAAoC,gBAApC,EAA4E;AAC1E,AFOW,ACFX,AFVF,EEUE,ICLI,CFOO,ACFN,CDEM,CCFJ,AFVO,CEQE,OFRlB,CGKkB,AHLO,GGKJ,CAAnB,CHLF,ECYa,ADZyB,GCYI,UAAC,KAAD,EAAM;AAC9C,ACFA,AEXF,AJCE,EEUA,AFVA,OCYO,AGbAA,CFWC,AFVA,CAAC,CEUC,CDEC,ACFA,AEXb,CHac,ACLI,EERF,GHaP,CAAW,IAAI,ADZtB,CCYuB,ADZA,MCYL,CDZlB,EAAgC,ECYE,CAA3B,IAAgC,CAAhC,CDZP,ECY2C,CDZC,ICY5C,MDZoD,KAApD;AGMA,AFOD,ACFC,AEXAC,AJCD,CCUY,CCAX,AEXAA,OAAO,CAACC,CDMC,ADKA,EAAE,AEXX,CFWY,AEXA,CFOI,OCDhB,CAAqB,EAArB,EAA+B,ECN/B;AFYA,AEXA,EFWA,MCNuB,IDMb,ECNmB,ADMjB,CAAC,CALG,CCDa,EAAA,CAAA,ICLjBC,2BAAZ;AHaW,ACDX,AEVA,AJJF,EEcE,IEVIC,CHWO,ADfb,CCea,ADfb,EEcU,EAAE,CAAC,CANK,EFRlB,GAAA,CIIoB,EHWP,CGXUC,EHWgB,EGXZ,AJJ3B,CII4BC,GAAL,EAArB,CAJc,CHewB,AGTtC,KHSqC,EAAM;AEPzC,AFQF,ACDA,EAAA,MCPM,CFQC,ACDA,EAAE,CAAC,CDCC,ACRK,CCAJ,AFQA,CERC,IFQN,CAAW,IERZ,AFQgB,CERC,AFQA,MAAL,EERZ,CAA0B,EFQE,CAA3B,IAAgC,CAAhC,EERD,CAAJ,AFQyC,EERE,GFQ7C;AEPI,AFQL,ACDC,AETA,AJHF,CCWa,CCCX,ICPI,GHLU,EIGLC,WJHX,CAA8B,CGKN,ADOA,CCPC,CDOC,CAAC,AFZ3B,CEIkB,CEDhB,AJHyC,GIGX,KDER,EAAe,KAAf,CAAlB;AACA,ADOJ,AETE,AJHF,EEYA,AFZA,IGKI,ICFID,AJHA,CAAC,EIGE,GAAGD,EDEE,ECFE,CDEC,ACFAC,CDEC,ADOA,EAAE,AETR,AJHd,CEYuB,AFZA,CGKC,ADFR,AEAd,UJHF,EGKmB,AHLiB,IGKI,KHLxC,CAA8C,KGKN,CAAA,AHLxC,CAAqD,IGKb,CAAM,GHL9C,EAA+D,CGK3D,AHL4D,IAAhE;AGMI,AFOO,ACAX,AFZD,EEYC,ICPI,ADOA,CDAO,CAAA,ACAX,YAAA,GDAW,CEPW,CAAC,CFOe,UAAC,CEPjB,EAAe,EFOC,EEPhB,AFOsB,CEPxC;AACD,AFOH,ACAE,AETA,KDFA,GCEIF,CHSC,ACAA,ECPE,EFOE,CAAC,ACAV,CCPW,IFON,CAAW,CEPC,CAAC,ACFA,EHSE,CAAC,CGTCE,GAAtB,EDEW,AFOK,AGTW,CDEC,IFOI,CAA3B,GEPM,CAA0B,AFOA,CAAhC,GAAoC,KAA3C,EEPa,CAAJ,EAA4C;AACjD,AFOL,AGTKE,AJPN,CCca,KELP,CHTN,CAAA,aAAA,GGSwB,AHTxB,CGSyB,ACFdC,IAAL,QDEkB,AHTxB,EGSuC,KAAf,CAAlB;AACA,ADOF,MCPE,EDOE,KAAK,KCPK,ADOV,GCPa,CAAC,CDOC,GCPG,EDOE,QAAxB,ECPiB,ADOiB,ICPI,WAAA,CAAA,KAAA,CAAM,MAA1C;AACA,AFOO,ACAP,AEVAL,MDGA,ACHAA,CHUO,CAAA,GCAF,IAAL,GDAO,EGVO,CHUM,EGVHE,CDGC,CAAC,CCHC,GAAGI,EHUF,IAAD,EEPF,AFOoB,EEPL,IAAf,CAAlB,KCHA;ADID,AFMsB,ACCtB,AEVA,KDDM,ADSP,CDCuB,IAAA,CENhB,ADOA,IDDgB,ACCZ,KDDY,ACCP,CDDO,EAAA,ECCZ,KAAe,KAAK,SAAxB,EAAmC;ACNxC,AFKqB,ACErB,IDFqB,EELrB,EFKqB,GAAA,ACEhB,EDFgB,GCErB,MCPgB,CAAC,WAAA,CAAA,KAAA,CAAM,YAAN,CAAD,CAAhB;AACD,AFIuC,ACGvC,AEVDC,IAAAA,CFQO,MAEA,IAAI,KAAK,KAAL,AEVU,CAACJ,IFUI,KAAK,SEVV,CFUd,AEVP,EFU2C;ACN5C,ADOG,AEVH,WFUQ,SAAL;ADHJ,ACIG,EDJH,GCES,KDFD,CAAC,ACIA,IAAI,KAAK,IDJlB,CACE,ACGW,KAAe,GDJ5B,EAEE,ACE+B,OAAxB,EDJT,ACI0C,GDF5B,gCAA4B,IAA5B,GAAgC,QAF9C;AEFA,AFKD,ACEK,AEVJI,CHIW,CEDX,ACHAA,QDGQ,CAAC,ADOA,GAAL,SEViB,CDGrB,ACHsBJ,CDGC,UAAvB,EAAmC,KCHd,CAArB,UDGA,CAAoD,OAApD,EAA6D,WAA7D;AACD,ADOI,AEVJ,KFQU,MAEA,IAAI,KAAK,KAAL,KAAe,KAAK,sBAAxB,EAAgD;AACrD,WAAK,gBAAL;AC1BN,AD2BK,AEVLP,IAAI,CFQO,ECzBX,CAAA,GD2BW,IC3BX,AD2Be,GC3Bf,ED2BoB,KAAL,IC3Bf,CD2B8B,KAAK,oBAAxB,EAA8C;AACnD,WAAK,cAAL;AACD,KAFM,MAEA,IAAI,KAAK,KAAL,KAAe,KAAK,QAAxB,EAAkC;AACvC,WAAK,IAAL;AACD;;AAED,WAAO,KAAK,KAAZ;AACD,GA9Be;AA+BhB,EAAA,SAAS,EAAT,YAAA;AACE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","file":"init.9d6cb373.js","sourceRoot":"../src","sourcesContent":["export function modFox(state: String) {\n  document.querySelector(\".fox\").className = `fox fox-${state}`;\n}\n\nexport function modScene(state: String) {\n  document.querySelector(\".game\").className = `game ${state}`;\n}\n\nexport function togglePoopBag(show: Boolean) {\n  document.querySelector(\".poop-bag\").classList.toggle(\"hidden\", !show);\n}\n","export const TICK_RATE: number = 1000;\nexport const ICONS = [\"fish\", \"poop\", \"weather\"];\nexport const RAIN_CHANCE: number = 0.2;\nexport const SCENES = [\"day\", \"rain\"];\nexport const DAY_LENGTH: number = 60;\nexport const NIGHT_LENGTH: number = 3;\n\n// TODO:\n// (ISSUE)\n// If timers are the same the game won't work.\n// For instance if getNextPoopTime is the same as celebratingTime\n// it will celebrate but never poop, and it will die because the poop\n// was neve cleaned.\ninterface getTime {\n  (clock: number): number;\n}\nexport const getNextHungerTime: getTime = (clock) => {\n  return Math.floor(Math.random() * 3) + 5 + clock;\n};\nexport const getNextDieTime: getTime = (clock) => {\n  return Math.floor(Math.random() * 2) + 3 + clock;\n};\nexport const getNextPoopTime: getTime = (clock) => {\n  return Math.floor(Math.random() * 2) + 6 + clock;\n};\n\nexport const writeModal = (text: string = \"\"): void => {\n  document.querySelector(\n    \".modal\"\n  ).innerHTML = `<div class=\"modal-inner\">${text}</div>`;\n};\n","import { modFox, modScene, togglePoopBag } from \"./ui\";\nimport {\n  RAIN_CHANCE,\n  SCENES,\n  DAY_LENGTH,\n  NIGHT_LENGTH,\n  getNextDieTime,\n  getNextHungerTime,\n  getNextPoopTime,\n  writeModal,\n} from \"./constants\";\n\nconst gameState = {\n  current: \"INIT\",\n  clock: 1,\n  wakeTime: -1,\n  sleepTime: -1,\n  hungryTime: -1,\n  poopTime: -1,\n  dieTime: -1,\n  timeToStartCelebrating: -1,\n  timeToEndCelebrating: -1,\n  tick(): void {\n    this.clock++;\n\n    if (this.clock === this.wakeTime) {\n      this.wake();\n    } else if (this.clock === this.sleepTime) {\n      this.sleep();\n    } else if (this.clock === this.hungryTime) {\n      this.getHungry();\n    } else if (this.clock === this.dieTime) {\n      this.die();\n    } else if (this.clock === this.timeToStartCelebrating) {\n      this.startcelebrating();\n    } else if (this.clock === this.timeToEndCelebrating) {\n      this.endCelebrating();\n    } else if (this.clock === this.poopTime) {\n      this.poop();\n    }\n\n    return this.clock;\n  },\n  startGame(): void {\n    this.current = \"HATCHING\";\n    this.wakeTime = this.clock + 3;\n    modFox(\"egg\");\n    modScene(\"day\");\n    writeModal();\n  },\n  wake(): void {\n    this.current = \"IDLING\";\n    this.wakeTime = -1;\n    this.scene = Math.random() > RAIN_CHANCE ? 0 : 1;\n    modScene(SCENES[this.scene]);\n    this.sleepTime = this.clock + DAY_LENGTH;\n    this.hungryTime = getNextHungerTime(this.clock);\n    this.determineFoxState();\n  },\n  sleep(): void {\n    this.state = \"SLEEP\";\n    modFox(\"sleep\");\n    modScene(\"night\");\n    this.clearTimers();\n    this.wakeTime = this.clock + NIGHT_LENGTH;\n  },\n  getHungry(): void {\n    this.current = \"HUNGRY\";\n    this.dieTime = getNextDieTime(this.clock);\n    this.hungryTime = -1;\n    modFox(\"hungry\");\n  },\n  poop(): void {\n    this.current = \"POOPING\";\n    this.poopTime = -1;\n    this.dieTime = getNextDieTime(this.clock);\n    modFox(\"pooping\");\n  },\n  die(): void {\n    this.current = \"DEAD\";\n    modScene(\"dead\");\n    modFox(\"dead\");\n    this.clearTimers();\n    writeModal(\"The fox died :( <br/> Press the middle button to start\");\n  },\n  startcelebrating(): void {\n    this.current = \"CELEBRATING\";\n    modFox(\"celebrate\");\n    this.timeToStartCelebrating = -1;\n    this.timeToEndCelebrating = this.clock + 2;\n  },\n  endCelebrating(): void {\n    this.timeToEndCelebrating = -1;\n    this.current = \"IDLING\";\n    togglePoopBag(false);\n    this.determineFoxState();\n  },\n  determineFoxState(): void {\n    if (this.current === \"IDLING\") {\n      if (SCENES[this.scene] === \"rain\") {\n        modFox(\"rain\");\n      } else {\n        modFox(\"idling\");\n      }\n    }\n  },\n  handleUserAction(icon: string): void {\n    if (\n      [\"SLEEP\", \"FEEDING\", \"CELEBRATING\", \"HATCHING\"].includes(this.current)\n    ) {\n      // do nothing\n      return;\n    }\n\n    if (this.current === \"INIT\" || this.current === \"DEAD\") {\n      this.startGame();\n      return;\n    }\n\n    switch (icon) {\n      case \"weather\":\n        this.changeWeather();\n        break;\n      case \"poop\":\n        this.cleanUpPoop();\n        break;\n      case \"fish\":\n        this.feed();\n        break;\n    }\n  },\n  changeWeather(): void {\n    this.scene = (this.scene + 1) % SCENES.length;\n    modScene(SCENES[this.scene]);\n    this.determineFoxState();\n  },\n  cleanUpPoop(): void {\n    if (this.current !== \"POOPING\") {\n      return;\n    }\n\n    this.dieTime = -1;\n    togglePoopBag(true);\n    this.startcelebrating();\n    this.hungryTime = getNextHungerTime(this.clock);\n  },\n  feed(): void {\n    if (this.current !== \"HUNGRY\") {\n      return;\n    }\n\n    this.current = \"FEEDING\";\n    this.dieTime = -1;\n    this.poopTime = getNextPoopTime(this.clock);\n    this.timeToStartCelebrating = this.clock + 2;\n  },\n  clearTimers(): void {\n    this.wakeTime = -1;\n    this.sleepTime = -1;\n    this.hungryTime = -1;\n    this.dieTime = -1;\n    this.poopTime = -1;\n    this.timeToStartCelebrating = -1;\n    this.timeToEndCelebrating = -1;\n  },\n};\n\nexport const handleUserAction = gameState.handleUserAction.bind(gameState);\nexport default gameState;\n","import { ICONS } from \"./constants\";\n\nconst toggleHightlighted = (iconIndex: number, show: boolean) => {\n  document\n    .querySelector(`.${ICONS[iconIndex]}-icon`)\n    .classList.toggle(\"highlighted\", show);\n};\n\nexport default function initButtons(handleUserAction: (icon: string) => void) {\n  let selectedIcon = 0;\n\n  function buttonClick({ target }) {\n    if (target.classList.contains(\"left-btn\")) {\n      toggleHightlighted(selectedIcon, false);\n      selectedIcon = (2 + selectedIcon) % ICONS.length;\n      toggleHightlighted(selectedIcon, true);\n    } else if (target.classList.contains(\"right-btn\")) {\n      toggleHightlighted(selectedIcon, false);\n      selectedIcon = (1 + selectedIcon) % ICONS.length;\n      toggleHightlighted(selectedIcon, true);\n    } else {\n      handleUserAction(ICONS[selectedIcon]);\n    }\n  }\n\n  document.querySelector(\".buttons\").addEventListener(\"click\", buttonClick);\n}\n","import game, { handleUserAction } from \"./gameState.ts\";\nimport { TICK_RATE } from \"./constants.ts\";\nimport initButtons from \"./buttons.ts\";\n\nfunction init() {\n  console.log(\"starting game\");\n  initButtons(handleUserAction);\n\n  let nextTimeToTick = Date.now();\n\n  // :eyes: Clojure!\n  function nextAnimationFrame() {\n    const now = Date.now();\n\n    if (nextTimeToTick <= now) {\n      game.tick();\n      nextTimeToTick = now + TICK_RATE;\n    }\n\n    requestAnimationFrame(nextAnimationFrame);\n  }\n\n  requestAnimationFrame(nextAnimationFrame);\n}\n\ninit();\n"]}